# ğŸ¥ Fuwari äºŒå¼€ç‰ˆ

![Node.js >= 20](https://img.shields.io/badge/node.js-%3E%3D20-brightgreen) 
![pnpm >= 9](https://img.shields.io/badge/pnpm-%3E%3D9-blue) 

è¿™æ˜¯ä¸€ä¸ªåŸºäº [Fuwari](https://github.com/saicaca/fuwari) çš„äºŒæ¬¡å¼€å‘ç‰ˆæœ¬ï¼Œåœ¨åŸæœ‰åŠŸèƒ½åŸºç¡€ä¸Šæ–°å¢äº†è®¸å¤šåŠŸèƒ½ï¼Œæ›´é€‚åˆä¸­å›½å®å®ä½“è´¨~

## âœ¨ å…³äº Fuwari

Fuwari æ˜¯ä¸€ä¸ªåŸºäº Astro æ„å»ºçš„ç°ä»£åŒ–é™æ€åšå®¢ä¸»é¢˜ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- ğŸš€ åŸºäº Astro 4.0 æ„å»ºï¼Œæ€§èƒ½å“è¶Š
- ğŸ¨ ç°ä»£åŒ–è®¾è®¡ï¼Œæ”¯æŒæ˜æš—ä¸»é¢˜åˆ‡æ¢
- ğŸ“± å®Œå…¨å“åº”å¼è®¾è®¡ï¼Œç§»åŠ¨ç«¯å‹å¥½
- ğŸ” å†…ç½®æœç´¢åŠŸèƒ½
- ğŸ“ æ”¯æŒ Markdown å’Œ MDX
- ğŸ·ï¸ æ ‡ç­¾å’Œåˆ†ç±»ç³»ç»Ÿ
- ğŸ’¬ è¯„è®ºç³»ç»Ÿé›†æˆ

## ğŸŒŸ äºŒå¼€æ–°å¢ç‰¹æ€§

åœ¨åŸç‰ˆ Fuwari åŸºç¡€ä¸Šï¼Œæœ¬ç‰ˆæœ¬æ–°å¢äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

- âœ… **GitHub Actions è‡ªåŠ¨æ„å»º** - æ¨é€ä»£ç åè‡ªåŠ¨æ„å»ºé™æ€ç½‘ç«™
- âœ… **å¤–éƒ¨æœåŠ¡å™¨è‡ªåŠ¨éƒ¨ç½²** - ä½¿ç”¨è„šæœ¬è‡ªåŠ¨ä¸‹è½½æ„å»ºäº§ç‰©å¹¶éƒ¨ç½²åˆ°æœåŠ¡å™¨
- âœ… **è‡ªå®šä¹‰é¡µé¢åˆ›å»º** - æ–°å¢ new-page å‘½ä»¤ï¼Œå¿«é€Ÿåˆ›å»ºè‡ªå®šä¹‰é¡µé¢
- âœ… **å‹é“¾é…ç½®ç³»ç»Ÿ** - é€šè¿‡ `friends_data.ts` è½»æ¾ç®¡ç†å‹æƒ…é“¾æ¥
- âœ… **å…¨å±€å¤´éƒ¨é…ç½®** - é€šè¿‡ `head_data.ts` ç»Ÿä¸€ç®¡ç†ç»Ÿè®¡ä»£ç å’ŒSEOæ ‡ç­¾
- âœ… **Giscusè¯„è®ºç»„ä»¶** - é€šè¿‡ `GiscusComments.astro` æä¾›ç°ä»£åŒ–è¯„è®ºç³»ç»Ÿ
- âœ… **æ–‡ç« ç½®é¡¶åŠŸèƒ½** - æ”¯æŒæ–‡ç« ç½®é¡¶æ˜¾ç¤ºï¼Œé‡è¦å†…å®¹ä¼˜å…ˆå±•ç¤º
- âœ… **ä¼˜é›…çš„æ–‡ç« æ’åº** - æ”¯æŒç²¾ç¡®æ—¶é—´æˆ³æ’åºï¼Œç¡®ä¿æ–‡ç« æŒ‰å‘å¸ƒæ—¶é—´å‡†ç¡®æ’åˆ—
- âœ… **å¯¼èˆªèœå•å¢å¼º** - æ”¯æŒäºŒçº§èœå•é…ç½®ï¼Œæ¡Œé¢ç«¯æ‚¬åœå±•å¼€ï¼Œç§»åŠ¨ç«¯ç‚¹å‡»åˆ‡æ¢

## ğŸ¯ é¡¹ç›®ç‰¹è‰²

- **é›¶é…ç½®éƒ¨ç½²** - ä¸€æ¬¡é…ç½®ï¼Œç»ˆèº«ä½¿ç”¨
- **å¿«é€Ÿå‘å¸ƒ** - ä»å†™ä½œåˆ°ä¸Šçº¿åªéœ€ä¸€æ¬¡ git push
- **ç¨³å®šå¯é ** - åŸºäºæˆç†Ÿçš„ Astro æ¡†æ¶å’Œ GitHub Actions
- **æ˜“äºç»´æŠ¤** - æ¸…æ™°çš„é¡¹ç›®ç»“æ„å’Œå®Œå–„çš„æ–‡æ¡£

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 20
- pnpm >= 9

### å®‰è£…å’Œè¿è¡Œ

```bash
git clone https://github.com/yyhhkya/fuwari.git
cd fuwari
pnpm install
pnpm dev
```

è®¿é—® `http://localhost:4321` æŸ¥çœ‹ä½ çš„åšå®¢ã€‚

## ğŸ”§ è‡ªåŠ¨éƒ¨ç½²é…ç½®

### 1. é…ç½®éƒ¨ç½²è„šæœ¬

ç¼–è¾‘ `auto-deploy-fuwari/auto-deploy.sh` æ–‡ä»¶ï¼š

```bash
GITHUB_OWNER="your-username"          # ä½ çš„GitHubç”¨æˆ·å
GITHUB_REPO="your-repo-name"          # ä»“åº“å
DEPLOY_DIR="/path/to/your/website"    # ç½‘ç«™éƒ¨ç½²ç›®å½•
GITHUB_TOKEN="your-github-token"     # GitHub Token
```

### 2. åˆ›å»º GitHub Token

1. è®¿é—® [GitHub Settings > Personal access tokens](https://github.com/settings/tokens)
2. ç‚¹å‡» "Generate new token (classic)"
3. é€‰æ‹©æƒé™ï¼š`actions:read`
4. å¤åˆ¶ç”Ÿæˆçš„ token å¹¶è®¾ç½®åˆ°è„šæœ¬ä¸­

### 3. è®¾ç½®å®šæ—¶ä»»åŠ¡

åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½® cron å®šæ—¶ä»»åŠ¡ï¼š

```bash
# æ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
*/5 * * * * /path/to/auto-deploy-fuwari/auto-deploy.sh >> /var/log/auto-deploy.log 2>&1
```

## ğŸ“ ä½¿ç”¨è¯´æ˜

### åˆ›å»ºæ–°æ–‡ç« 

```bash
pnpm new-post <filename>
```

### åˆ›å»ºè‡ªå®šä¹‰é¡µé¢

```bash
pnpm new-page <filename>
```

### Giscusè¯„è®ºç»„ä»¶ (`src/components/GiscusComments.astro`)

åŸºäº GitHub Discussions çš„ç°ä»£åŒ–è¯„è®ºç³»ç»Ÿç»„ä»¶ï¼š

* æ”¯æŒæ˜æš—ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢
* å…¼å®¹ Astro å®¢æˆ·ç«¯å¯¼èˆªå’Œ swup é¡µé¢åˆ‡æ¢
* è‡ªåŠ¨å¤„ç†ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå’Œå†…å­˜æ¸…ç†
* æ”¯æŒå¤šè¯­è¨€å’Œè‡ªå®šä¹‰é…ç½®

**é…ç½®è¯´æ˜ï¼š**

```
ä½¿ç”¨å‰éœ€è¦ä¿®æ”¹ç¬¬25è¡Œçš„ä»“åº“é…ç½®ï¼š
script.setAttribute('data-repo', 'your-username/your-repo'); // ä¿®æ”¹ä¸ºä½ çš„GitHubä»“åº“
script.setAttribute('data-repo-id', 'your-repo-id');         // ä¿®æ”¹ä¸ºä½ çš„ä»“åº“ID
script.setAttribute('data-category-id', 'your-category-id'); // ä¿®æ”¹ä¸ºä½ çš„åˆ†ç±»ID
```

è¯·è®¿é—® [Giscuså®˜ç½‘](https://giscus.app/zh-CN) è·å–ä½ çš„ä»“åº“é…ç½®ä¿¡æ¯ã€‚

### å‹é“¾é…ç½® (`src/friends_data.ts`)

ç”¨äºé…ç½®å‹æƒ…é“¾æ¥æ•°æ®ï¼Œæ”¯æŒæ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤å‹é“¾ï¼š

```typescript
export interface Friend {
  name: string;        // å‹é“¾åç§°
  url: string;         // å‹é“¾åœ°å€
  avatar: string;      // å¤´åƒé“¾æ¥
  description: string; // æè¿°ä¿¡æ¯
}
```

### å…¨å±€å¤´éƒ¨é…ç½® (`src/head_data.ts`)

ç”¨äºé…ç½®ç½‘ç«™çš„å…¨å±€å¤´éƒ¨ä»£ç ï¼ŒåŒ…æ‹¬ç»Ÿè®¡ä»£ç ã€SEOæ ‡ç­¾ç­‰ï¼š

- `analytics` - ç»Ÿè®¡ä»£ç ï¼ˆGoogle Analyticsã€ç™¾åº¦ç»Ÿè®¡ç­‰ï¼‰
- `customMeta` - è‡ªå®šä¹‰ meta æ ‡ç­¾
- `thirdPartyScripts` - ç¬¬ä¸‰æ–¹è„šæœ¬
- `customHead` - å…¶ä»–è‡ªå®šä¹‰å¤´éƒ¨å†…å®¹

### æ–‡ç« ç½®é¡¶è®¾ç½®

åœ¨æ–‡ç« çš„ frontmatter ä¸­æ·»åŠ  `pinned: true` å³å¯å°†æ–‡ç« ç½®é¡¶ï¼š

```yaml
---
title: "é‡è¦å…¬å‘Š"
date: 2024-01-01
pinned: true
---
```

ç½®é¡¶æ–‡ç« å°†åœ¨é¦–é¡µå’Œå½’æ¡£é¡µé¢ä¼˜å…ˆæ˜¾ç¤ºï¼Œå¹¶å¸¦æœ‰ç½®é¡¶æ ‡è¯†ã€‚

### äºŒçº§èœå•é…ç½® (`src/config.ts`)

åœ¨å¯¼èˆªæ é…ç½®ä¸­æ”¯æŒäºŒçº§èœå•ï¼Œå¯ä»¥åˆ›å»ºä¸‹æ‹‰èœå•ç»“æ„ï¼š

```typescript
export const navBarConfig: NavBarConfig = {
  links: [
    LinkPreset.Home,
    LinkPreset.Archive,
    LinkPreset.About,
    {
      name: 'å…¶ä»–',
      url: '#',  // çˆ¶çº§èœå•ä½¿ç”¨ # ä½œä¸ºå ä½ç¬¦
      children: [
        {
          name: 'å¸¸ç”¨è„šæœ¬',
          url: '/scripts/',
          external: false
        },
        {
          name: 'ç”¨è¯æ„Ÿå—',
          url: '/sleep/',
          external: false
        },
      ]
    }
  ]
}
```

**é…ç½®è¯´æ˜ï¼š**
- `name` - èœå•æ˜¾ç¤ºåç§°
- `url` - é“¾æ¥åœ°å€ï¼ˆçˆ¶çº§èœå•å»ºè®®ä½¿ç”¨ `#`ï¼‰
- `children` - å­èœå•æ•°ç»„
- `external` - æ˜¯å¦ä¸ºå¤–éƒ¨é“¾æ¥

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- æ¡Œé¢ç«¯ï¼šé¼ æ ‡æ‚¬åœå±•å¼€äºŒçº§èœå•
- ç§»åŠ¨ç«¯ï¼šç‚¹å‡»åˆ‡æ¢äºŒçº§èœå•æ˜¾ç¤º/éšè—
- æ”¯æŒæ— é™å±‚çº§åµŒå¥—
- è‡ªåŠ¨é€‚åº”å†…å®¹å®½åº¦

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤                         | è¯´æ˜      |
|:-------------------------- |:------- |
| `pnpm dev`                 | å¯åŠ¨å¼€å‘æœåŠ¡å™¨ |
| `pnpm build`               | æ„å»ºç”Ÿäº§ç‰ˆæœ¬  |
| `pnpm preview`             | é¢„è§ˆæ„å»ºç»“æœ  |
| `pnpm new-post <filename>` | åˆ›å»ºæ–°æ–‡ç«    |
| `pnpm new-page <filename>` | åˆ›å»ºè‡ªå®šä¹‰é¡µé¢ |

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ [Fuwari](https://github.com/saicaca/fuwari) åŸä½œè€…æä¾›çš„ä¼˜ç§€åŸºç¡€æ¡†æ¶ã€‚

---

**åŸºäº Fuwari äºŒå¼€ï¼Œè®©åšå®¢å‘å¸ƒæ›´ç®€å•ï¼** ğŸš€




